<!DOCTYPE html>
<html lang="{{ .Site.LanguageCode | default "en-us" }}">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{ .Title }} | {{ .Site.Title }}</title>
  <meta name="description" content="{{ .Summary | plainify }}">
  {{ range .Site.Params.custom_css }}
  <link rel="stylesheet" href="/{{ . }}">
  {{ end }}
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; line-height: 1.6; color: #333; padding-top: 80px; }
    a { color: #0066cc; text-decoration: none; }
    a:hover { text-decoration: underline; }
    article h3 { margin-top: 2.5rem; margin-bottom: 1rem; }
  </style>
</head>
<body>
  {{ partial "site-header.html" . }}

  <main>
<div style="max-width: 70rem; margin: 0 auto; padding: 2rem;">
  
  <!-- Company Header Card -->
  <div style="background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%); color: white; padding: 3rem 2rem; border-radius: 16px; margin-bottom: 2rem; box-shadow: 0 4px 6px rgba(0,0,0,0.1); position: relative;">
    {{ if .Params.logo }}
    <div style="position: absolute; top: 2rem; right: 2rem; background: white; padding: 1.5rem; border-radius: 12px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); width: 180px; height: 180px; display: flex; align-items: center; justify-content: center;">
      <img src="{{ .Params.logo }}" alt="{{ .Title }} logo" style="max-width: 150px; max-height: 150px; object-fit: contain;">
    </div>
    {{ end }}
    <div style="display: flex; justify-content: space-between; align-items: start; flex-wrap: wrap; gap: 2rem; {{ if .Params.logo }}padding-right: 220px;{{ end }}">
      <div style="flex: 1; min-width: 300px;">
        <div style="display: flex; gap: 1rem; align-items: start; margin-bottom: 1rem; flex-wrap: wrap;">
          <h1 style="font-size: 2.5rem; margin: 0; font-weight: 700; flex: 1;">{{ .Title }}</h1>
          {{ if .Params.company_type }}
            {{ if reflect.IsSlice .Params.company_type }}
              {{ range .Params.company_type }}
              <div style="background: rgba(255,255,255,0.2); padding: 0.5rem 1rem; border-radius: 20px; font-size: 0.9rem; font-weight: 500; white-space: nowrap;">
                {{ . }}
              </div>
              {{ end }}
            {{ else }}
            <div style="background: rgba(255,255,255,0.2); padding: 0.5rem 1rem; border-radius: 20px; font-size: 0.9rem; font-weight: 500; white-space: nowrap;">
              {{ .Params.company_type }}
            </div>
            {{ end }}
          {{ end }}
          {{ if .Params.status }}
          <div style="background: {{ if eq .Params.status "Active" }}rgba(34,197,94,0.3){{ else }}rgba(107,114,128,0.3){{ end }}; color: {{ if eq .Params.status "Active" }}#86efac{{ else }}#d1d5db{{ end }}; padding: 0.5rem 1rem; border-radius: 20px; font-size: 0.9rem; font-weight: 500; white-space: nowrap;">
            {{ if eq .Params.status "Active" }}âœ“{{ end }} {{ .Params.status }}
          </div>
          {{ end }}
        </div>

        <div style="display: flex; flex-wrap: wrap; gap: 2rem; margin-top: 1.5rem;">
          {{ if .Params.headquarters }}
          <div>
            <div style="font-size: 0.85rem; opacity: 0.8; text-transform: uppercase; letter-spacing: 0.5px;">Headquarters</div>
            <div style="font-size: 1.1rem; font-weight: 600; margin-top: 0.25rem;">ğŸ“ {{ .Params.headquarters }}</div>
          </div>
          {{ end }}

          {{ if .Params.publicly_listed }}
          <div>
            <div style="font-size: 0.85rem; opacity: 0.8; text-transform: uppercase; letter-spacing: 0.5px;">Stock</div>
            <div style="font-size: 1.1rem; font-weight: 600; margin-top: 0.25rem;">ğŸ“ˆ {{ if .Params.stock_ticker }}{{ .Params.stock_ticker }}{{ else }}Publicly Listed{{ end }}</div>
          </div>
          {{ end }}

          {{ if .Params.founded }}
          <div>
            <div style="font-size: 0.85rem; opacity: 0.8; text-transform: uppercase; letter-spacing: 0.5px;">Founded</div>
            <div style="font-size: 1.1rem; font-weight: 600; margin-top: 0.25rem;">ğŸ“… {{ .Params.founded }}</div>
          </div>
          {{ end }}

          {{ if .Params.employees }}
          <div>
            <div style="font-size: 0.85rem; opacity: 0.8; text-transform: uppercase; letter-spacing: 0.5px;">Employees</div>
            <div style="font-size: 1.1rem; font-weight: 600; margin-top: 0.25rem;">ğŸ‘¥ {{ .Params.employees }}</div>
          </div>
          {{ end }}

          {{ if .Params.annual_turnover }}
          <div>
            <div style="font-size: 0.85rem; opacity: 0.8; text-transform: uppercase; letter-spacing: 0.5px;">Annual Turnover</div>
            <div style="font-size: 1.1rem; font-weight: 600; margin-top: 0.25rem;">ğŸ’° {{ .Params.annual_turnover }}</div>
          </div>
          {{ end }}
        </div>
      </div>
    </div>

    <div style="margin-top: 1.5rem; display: flex; gap: 1rem; flex-wrap: wrap;">
      {{ if .Params.website }}
      <a href="{{ .Params.website }}" target="_blank" rel="noopener"
         style="display: inline-block; background: white; color: #1e3a8a; padding: 0.75rem 1.5rem; border-radius: 8px; text-decoration: none; font-weight: 600;">
        ğŸŒ Visit Website
      </a>
      {{ end }}
    </div>
  </div>
  
  <!-- Materials & Markets Grid -->
  <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
    {{ if .Params.primary_materials }}
    <div style="background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%); border-left: 4px solid #3b82f6; padding: 1.5rem; border-radius: 8px;">
      <h3 style="color: #1e3a8a; margin-bottom: 1rem; font-size: 1.1rem; font-weight: 600;">ğŸ§¬ Primary Materials</h3>
      <p style="color: #475569; line-height: 1.6; margin: 0;">{{ .Params.primary_materials }}</p>
    </div>
    {{ end }}

    {{ if .Params.market_segments }}
    <div style="background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); border-left: 4px solid #f59e0b; padding: 1.5rem; border-radius: 8px;">
      <h3 style="color: #92400e; margin-bottom: 1rem; font-size: 1.1rem; font-weight: 600;">ğŸ¯ Market Segments</h3>
      <p style="color: #475569; line-height: 1.6; margin: 0;">{{ .Params.market_segments }}</p>
    </div>
    {{ end }}

    {{ if .Params.capacity }}
    <div style="background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%); border-left: 4px solid #22c55e; padding: 1.5rem; border-radius: 8px;">
      <h3 style="color: #166534; margin-bottom: 1rem; font-size: 1.1rem; font-weight: 600;">âš™ï¸ Production Capacity</h3>
      <p style="color: #475569; font-size: 1.3rem; font-weight: 600; margin: 0;">{{ .Params.capacity }}</p>
    </div>
    {{ end }}

    {{ if .Params.products }}
    <div style="background: linear-gradient(135deg, #fce7f3 0%, #fbcfe8 100%); border-left: 4px solid #ec4899; padding: 1.5rem; border-radius: 8px;">
      <h3 style="color: #831843; margin-bottom: 1rem; font-size: 1.1rem; font-weight: 600;">ğŸ“¦ Key Products</h3>
      <ul style="list-style: none; padding: 0; margin: 0;">
        {{ range .Params.products }}
        <li style="padding: 0.25rem 0; color: #475569;">âœ“ {{ . }}</li>
        {{ end }}
      </ul>
    </div>
    {{ end }}
  </div>

  <!-- Bioplastic Producers - Production Capacity by Biopolymer -->
  {{ if and (eq .Params.company_type "Bioplastic Producer") .Params.production_capacity }}
  <div style="background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%); border-left: 4px solid #22c55e; padding: 2rem; border-radius: 8px; margin-bottom: 2rem;">
    <h2 style="color: #166534; margin-bottom: 1.5rem; font-size: 1.5rem; font-weight: 600;">âš™ï¸ Production Capacity by Biopolymer</h2>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem;">
      {{ range .Params.production_capacity }}
      <div style="background: white; padding: 1.5rem; border-radius: 8px; border: 1px solid #bbf7d0;">
        <h3 style="color: #166534; margin-bottom: 0.5rem; font-size: 1.1rem; font-weight: 600;">{{ .biopolymer }}</h3>
        <p style="color: #475569; margin: 0.75rem 0;"><strong>Capacity:</strong> {{ .capacity }}</p>
        <p style="color: #475569; margin: 0;"><strong>Location:</strong> {{ .location }}</p>
      </div>
      {{ end }}
    </div>
  </div>
  {{ end }}
  
  <!-- Main Content -->
  <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 2rem; margin-bottom: 2rem;">
    <div>
      <article style="background: white; padding: 2rem; border-radius: 12px; border: 1px solid #e5e7eb; line-height: 1.8; color: #374151;">
        {{ .Content }}
      </article>
    </div>
    
    <!-- Sidebar -->
    <aside>
      <!-- Connect & Social -->
      {{ if or .Params.website .Params.email .Params.phone .Params.address }}
      <div style="background: linear-gradient(135deg, #f9fafb 0%, #f3f4f6 100%); padding: 1.5rem; border-radius: 12px; margin-bottom: 1.5rem; border: 1px solid #e5e7eb;">
        <h3 style="color: #1e3a8a; margin-bottom: 1rem; font-size: 1.1rem; font-weight: 600;">ğŸ”— Connect</h3>

        {{ if .Params.website }}
        <p style="margin: 0.75rem 0; color: #475569;">
          <a href="{{ .Params.website }}" target="_blank" rel="noopener" style="color: #3b82f6; text-decoration: none; font-weight: 500;">ğŸŒ Official Website â†’</a>
        </p>
        {{ end }}

        {{ if .Params.twitter }}
        <p style="margin: 0.75rem 0; color: #475569;">
          <a href="https://twitter.com/{{ .Params.twitter | replace "@" "" }}" target="_blank" rel="noopener" style="color: #1d9bf0; text-decoration: none; font-weight: 500;">ğ• Twitter â†’</a>
        </p>
        {{ end }}

        {{ if .Params.linkedin }}
        <p style="margin: 0.75rem 0; color: #475569;">
          <a href="https://linkedin.com/company/{{ .Params.linkedin }}" target="_blank" rel="noopener" style="color: #0a66c2; text-decoration: none; font-weight: 500;">in LinkedIn â†’</a>
        </p>
        {{ end }}

        {{ if .Params.youtube }}
        <p style="margin: 0.75rem 0; color: #475569;">
          <a href="https://youtube.com/{{ .Params.youtube }}" target="_blank" rel="noopener" style="color: #ff0000; text-decoration: none; font-weight: 500;">â–¶ï¸ YouTube â†’</a>
        </p>
        {{ end }}

        {{ if .Params.instagram }}
        <p style="margin: 0.75rem 0; color: #475569;">
          <a href="https://instagram.com/{{ .Params.instagram | replace "@" "" }}" target="_blank" rel="noopener" style="color: #e1306c; text-decoration: none; font-weight: 500;">ğŸ“¸ Instagram â†’</a>
        </p>
        {{ end }}

        {{ if .Params.email }}
        <p style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid #e5e7eb; color: #475569;">
          <strong>Email:</strong><br>
          <a href="mailto:{{ .Params.email }}" style="color: #3b82f6; text-decoration: none; font-size: 0.9rem;">{{ .Params.email }}</a>
        </p>
        {{ end }}

        {{ if .Params.phone }}
        <p style="margin: 0.5rem 0; color: #475569;">
          <strong>Phone:</strong><br>
          <span style="font-size: 0.9rem;">{{ .Params.phone }}</span>
        </p>
        {{ end }}

        {{ if .Params.address }}
        <p style="margin: 0.5rem 0; color: #475569;">
          <strong>Address:</strong><br>
          <span style="font-size: 0.9rem;">{{ .Params.address }}</span>
        </p>
        {{ end }}
      </div>
      {{ end }}
      
      <!-- Certifications -->
      {{ if .Params.certifications }}
      <div style="background: #f0fdf4; padding: 1.5rem; border-radius: 12px; margin-bottom: 1.5rem; border: 1px solid #bbf7d0;">
        <h3 style="color: #166534; margin-bottom: 1rem; font-size: 1.1rem;">Certifications</h3>
        <ul style="list-style: none; padding: 0; margin: 0;">
          {{ range .Params.certifications }}
          <li style="padding: 0.5rem 0; color: #475569; border-bottom: 1px solid #e5e7eb;">âœ“ {{ . }}</li>
          {{ end }}
        </ul>
      </div>
      {{ end }}
      
      <!-- Related News -->
      <div style="background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); padding: 1.5rem; border-radius: 12px; border: 1px solid #fde68a; margin-bottom: 1.5rem;">
        <h3 style="color: #92400e; margin-bottom: 1rem; font-size: 1.1rem; font-weight: 600;">ğŸ“° Latest News</h3>
        <p style="color: #78716c; font-size: 0.9rem; margin: 0;">
          Discover the latest news and updates about {{ .Title }}.
        </p>
        <a href="/news/" style="display: inline-block; margin-top: 1rem; color: white; background: #f59e0b; padding: 0.5rem 1rem; border-radius: 6px; text-decoration: none; font-weight: 500; font-size: 0.9rem;">
          View News â†’
        </a>
      </div>
    </aside>
  </div>
  
  <!-- Navigation -->
  {{ $allCompanies := where .Site.RegularPages "Section" "companies" }}
  {{ $sortedCompanies := sort $allCompanies ".Title" }}
  {{ $currentIndex := 0 }}
  {{ range $index, $page := $sortedCompanies }}
    {{ if eq $page.Permalink $.Permalink }}
      {{ $currentIndex = $index }}
    {{ end }}
  {{ end }}
  {{ $prevIndex := sub $currentIndex 1 }}
  {{ $nextIndex := add $currentIndex 1 }}
  {{ $prevCompany := index $sortedCompanies $prevIndex }}
  {{ $nextCompany := index $sortedCompanies $nextIndex }}

  <div style="padding-top: 2rem; border-top: 2px solid #e5e7eb;">
    <!-- Previous/Next Navigation -->
    <div style="display: flex; justify-content: space-between; margin-bottom: 1.5rem; gap: 1rem; flex-wrap: wrap;">
      <div style="flex: 1; min-width: 200px;">
        {{ if ge $prevIndex 0 }}
        <a href="{{ $prevCompany.Permalink }}" style="display: inline-block; padding: 0.75rem 1.25rem; background: #f0f9ff; color: #1e3a8a; border-radius: 8px; text-decoration: none; font-weight: 500; border: 1px solid #bfdbfe; transition: all 0.2s;">
          <span style="font-size: 0.85rem; display: block; opacity: 0.7; margin-bottom: 0.25rem;">â† Previous</span>
          <span style="font-size: 0.95rem;">{{ $prevCompany.Title }}</span>
        </a>
        {{ else }}
        <div style="opacity: 0.3; padding: 0.75rem 1.25rem;">
          <span style="font-size: 0.85rem; display: block;">â† Previous</span>
          <span style="font-size: 0.95rem;">No previous company</span>
        </div>
        {{ end }}
      </div>

      <div style="flex: 1; min-width: 200px; text-align: right;">
        {{ if lt $nextIndex (len $sortedCompanies) }}
        <a href="{{ $nextCompany.Permalink }}" style="display: inline-block; padding: 0.75rem 1.25rem; background: #f0f9ff; color: #1e3a8a; border-radius: 8px; text-decoration: none; font-weight: 500; border: 1px solid #bfdbfe; transition: all 0.2s;">
          <span style="font-size: 0.85rem; display: block; opacity: 0.7; margin-bottom: 0.25rem;">Next â†’</span>
          <span style="font-size: 0.95rem;">{{ $nextCompany.Title }}</span>
        </a>
        {{ else }}
        <div style="opacity: 0.3; padding: 0.75rem 1.25rem;">
          <span style="font-size: 0.85rem; display: block;">Next â†’</span>
          <span style="font-size: 0.95rem;">No next company</span>
        </div>
        {{ end }}
      </div>
    </div>

    <!-- Back to Company Profiles -->
    <div style="text-align: center;">
      <a href="/companies/" style="color: #3b82f6; text-decoration: none; font-weight: 500;">â† Back to Company Profiles</a>
    </div>
  </div>
</div>

  </main>

  {{ partial "site-footer.html" . }}
</body>
</html>
